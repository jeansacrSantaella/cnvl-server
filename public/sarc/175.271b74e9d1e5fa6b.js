"use strict";(self.webpackChunksarc=self.webpackChunksarc||[]).push([[175],{6175:(h,m,i)=>{i.r(m),i.d(m,{AccessModule:()=>P});var r=i(6895),_=i(646),g=i(7372),d=i(5226),p=i.n(d);class l{constructor(){this.nombre=""}}var e=i(1571),x=i(6445),C=i(6602);let b=(()=>{class s{constructor(t){this._accessGateway=t}getById(t){return this._accessGateway.getById(t)}getAll(){return this._accessGateway.getAll()}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(C.F))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var Z=i(9119),v=i(8462),u=i(433),y=i(2386);function T(s,c){if(1&s&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&s){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function w(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"input",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.getAccessToRole(o.id))}),e.qZA()}if(2&s){const t=e.oxw(2).$implicit,n=e.oxw();e.MGl("name","rolesAccess",t.id,""),e.Q6J("value",t.id)("checked",n.drawCheckboxAccess(t.id))}}function U(s,c){if(1&s&&(e.TgZ(0,"label",19),e._uU(1),e.YNc(2,w,1,3,"input",26),e.qZA()),2&s){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.nombre," "),e.xp6(1),e.Q6J("ngIf",t&&4!==t.id)}}function M(s,c){if(1&s&&(e.TgZ(0,"div",24),e.YNc(1,U,3,2,"label",25),e.qZA()),2&s){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",4!==t.id)}}function J(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"input",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.getAccessToRole(o.id))}),e.qZA()}if(2&s){const t=e.oxw(2).$implicit,n=e.oxw();e.MGl("name","rolesAccess",t.id,""),e.Q6J("value",t.id)("checked",n.drawCheckboxAccess(t.id))}}function R(s,c){if(1&s&&(e.TgZ(0,"label",19),e._uU(1),e.YNc(2,J,1,3,"input",26),e.qZA()),2&s){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.nombre," "),e.xp6(1),e.Q6J("ngIf",t&&4===t.id)}}function S(s,c){if(1&s&&(e.TgZ(0,"div",24),e.YNc(1,R,3,2,"label",25),e.qZA()),2&s){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",4===t.id)}}let I=(()=>{class s{constructor(t,n,o){this._getRoleUseCases=t,this._getAccessUseCases=n,this._updateRoleUseCases=o,this.access=new l,this.roleCreate=new g.M,this.isReady=!1,this.roles=[],this.accesosSeleccted=[]}ngOnInit(){this.getAllRoles(),this.getAllAccess()}getAccessToRole(t){if(this.accesosSeleccted.find(o=>o.id==t))this.accesosSeleccted=this.accesosSeleccted.filter(o=>o.id!==t);else{const o=this.accesos$.filter(a=>a.id===t);this.accesosSeleccted.push(o[0])}}fillAccessWithRole(t){const n=t.filter(o=>o.id==this.roleCreate.id);this.roleCreate.nombre=n[0].nombre,this.accesosSeleccted=n[0].accesos}drawCheckboxAccess(t){return this.accesosSeleccted.find(n=>n.id==t)}getAllAccess(){this._getAccessUseCases.getAll().subscribe(n=>{this.accesos$=n,this.isReady=!0})}getAllRoles(){this.isReady=!1,this._getRoleUseCases.getAll().subscribe(n=>{this.roles=n,this.isReady=!0})}createAccess(){this.roleCreate.accesos=this.accesosSeleccted,this.roleCreate.activo=!0,""!==this.roleCreate?.nombre?(this.response$=this._updateRoleUseCases.update(this.roleCreate),this.response$.subscribe(t=>{this.isReady=!0,p().fire("","Accesos asignados exitosamente.","success"),this.clear()})):p().fire("","Los datos ingresados son incorrectos.","error")}clear(){this.roleCreate=new g.M,this.accesosSeleccted=[]}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(x.B),e.Y36(b),e.Y36(Z.O))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-access-create"]],decls:34,vars:5,consts:[[3,"showBack"],[1,"wrapper","flex-grow-1","d-flex","align-items-center","my-3"],[1,"container","d-flex","justify-content-around","justify-content-lg-start"],[1,"w-50"],[1,"mb-3","d-flex","flex-row"],["for","inputPassword",1,"col-lg-2","col-md-2","col-sm-2","col-form-label","text-center","mx-1"],[1,"col-lg-8","col-md-8","col-sm-8"],["name","rolesAccess",1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","align-items-center"],[1,"fw-bold","mb-2","titulo"],[1,"d-flex","flex-column","w-50",3,"ngSubmit"],["ngformUpdate",""],[1,"w-100","text-start"],[1,"subtitulo"],[1,"w-100"],["class","w-75 m-auto",4,"ngFor","ngForOf"],[1,"w-50","text-start","mt-2"],[1,"w-100","mt-3"],[1,"flex-row","d-flex","justify-content-between","m-1","align-items-stretch"],["type","button",1,"btn","btn-secondary","col-md-3",3,"click"],[1,"col-md-1"],["type","submit",1,"btn","btn-primary","col-md-3"],[3,"value"],[1,"w-75","m-auto"],["class","flex-row d-flex justify-content-between m-1 align-items-stretch",4,"ngIf"],["type","checkbox",3,"value","name","checked","click",4,"ngIf"],["type","checkbox",3,"value","name","checked","click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-base",0)(1,"app-card",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),e._uU(6,"Rol"),e.qZA(),e.TgZ(7,"div",6)(8,"select",7),e.NdJ("ngModelChange",function(a){return n.roleCreate.id=a})("ngModelChange",function(){return n.fillAccessWithRole(n.roles)}),e.YNc(9,T,2,2,"option",8),e.qZA()()()()(),e.TgZ(10,"div",9)(11,"label",10),e._uU(12,"Accesos"),e.qZA(),e.TgZ(13,"form",11,12),e.NdJ("ngSubmit",function(){return n.createAccess()}),e.TgZ(15,"div",13)(16,"label",14),e._uU(17,"Administraci\xf3n"),e.qZA()(),e.TgZ(18,"div",15),e._UZ(19,"hr"),e.qZA(),e.YNc(20,M,2,1,"div",16),e.TgZ(21,"div",17)(22,"label",14),e._uU(23,"Mapa Interactivo"),e.qZA()(),e.TgZ(24,"div",15),e._UZ(25,"hr"),e.qZA(),e.YNc(26,S,2,1,"div",16),e.TgZ(27,"div",18)(28,"div",19)(29,"button",20),e.NdJ("click",function(){return n.clear()}),e._uU(30," Cancelar "),e.qZA(),e._UZ(31,"div",21),e.TgZ(32,"button",22),e._uU(33," Guardar "),e.qZA()()()()()()()),2&t&&(e.Q6J("showBack",!0),e.xp6(8),e.Q6J("ngModel",n.roleCreate.id),e.xp6(1),e.Q6J("ngForOf",n.roles),e.xp6(11),e.Q6J("ngForOf",n.accesos$),e.xp6(6),e.Q6J("ngForOf",n.accesos$))},dependencies:[r.sg,r.O5,v.H,u._Y,u.YN,u.Kr,u.EJ,u.JJ,u.JL,u.On,u.F,y.A],styles:[".titulo[_ngcontent-%COMP%]{font-size:20px!important;font-family:Arial,Helvetica,sans-serif}.subtitulo[_ngcontent-%COMP%]{font-size:16px;font-family:Arial,Helvetica,sans-serif}"]}),s})();var F=i(8675),L=i(4004),f=i(1165);let G=(()=>{class s{constructor(t){this._accessGateway=t}deleteById(t){return this._accessGateway.deleteById(t)}update(t){return this._accessGateway.update(t)}create(t){return this._accessGateway.create(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(C.F))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function E(s,c){1&s&&(e.TgZ(0,"span",15),e._uU(1,"* Campo requerido"),e.qZA())}let N=(()=>{class s{constructor(t,n){this.modalService=t,this._updateRoleUseCases=n,this.access=new l,this.isReady=!1}updateAccess(){""!==this.access?.nombre?(this.response$=this._updateRoleUseCases.update(this.access),this.response$.subscribe(t=>{this.isReady=!0,p().fire({icon:"success",text:"MSG003",title:"\xa1Usuario editado exitosamente!"}),this.close()})):p().fire("","Los datos ingresados son incorrectos.","error")}close(){this.modalService.dismissAll()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(f.FF),e.Y36(G))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-access-edit"]],decls:20,vars:2,consts:[["data-target","#modal",1,"modal-content"],[1,"modal-header"],[1,"modal-title","text-primary"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],["ngformUpdate",""],[1,"col-12","label-left"],["for",""],["type","text","name","nombre","id","nombre","autofocus","","required","",1,"form-control",3,"ngModel","ngModelChange"],["nombre","ngModel"],["class","text-danger",4,"ngIf"],[1,"modal-footer","btn-group"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"text-danger"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3,"Modificar Acceso"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.close()}),e.qZA()(),e.TgZ(5,"div",4)(6,"form",5,6),e.NdJ("ngSubmit",function(){return n.updateAccess()}),e.TgZ(8,"div",7)(9,"label",8),e._uU(10,"Nombre"),e.qZA()(),e.TgZ(11,"div",7)(12,"input",9,10),e.NdJ("ngModelChange",function(a){return n.access.nombre=a}),e.qZA(),e.YNc(14,E,2,0,"span",11),e.qZA(),e.TgZ(15,"div",12)(16,"button",13),e.NdJ("click",function(){return n.close()}),e._uU(17," Cancelar "),e.qZA(),e.TgZ(18,"button",14),e._uU(19,"Guardar"),e.qZA()()()()()),2&t){const o=e.MAs(13);e.xp6(12),e.Q6J("ngModel",n.access.nombre),e.xp6(2),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}},dependencies:[r.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.On,u.F],encapsulation:2}),s})();function O(s,c){1&s&&(e.TgZ(0,"div"),e._UZ(1,"img",6),e.qZA()),2&s&&(e.xp6(1),e.Q6J("src","assets/img/loader.gif",e.LSH))}function B(s,c){1&s&&(e.TgZ(0,"tbody")(1,"td",13),e._uU(2,"Sin resultados"),e.qZA()())}function Y(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"ngb-highlight",15),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"ngb-highlight",15),e.qZA(),e.TgZ(6,"td")(7,"button",16),e.NdJ("click",function(){const a=e.CHM(t).$implicit,A=e.oxw(3);return e.KtG(A.editById(a.id))}),e._UZ(8,"em",17),e.qZA(),e.TgZ(9,"button",16),e.NdJ("click",function(){const a=e.CHM(t).$implicit,A=e.oxw(3);return e.KtG(A.deleteById(a.id))}),e._UZ(10,"em",18),e.qZA()()()}if(2&s){const t=c.$implicit,n=e.oxw(3);e.xp6(2),e.Q6J("result",e.lcZ(3,4,t.id))("term",n.filterAll.value),e.xp6(3),e.Q6J("result",t.nombre)("term",n.filterAll.value)}}function $(s,c){if(1&s&&(e.TgZ(0,"tbody"),e.YNc(1,Y,11,6,"tr",14),e.ALo(2,"slice"),e.ALo(3,"async"),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,1,e.lcZ(3,5,t.source$),(t.page-1)*t.pageSize,t.page*t.pageSize))}}function Q(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",7)(3,"table",8)(4,"thead",9)(5,"tr")(6,"th",10)(7,"div",11),e._uU(8,"#"),e.qZA()(),e.TgZ(9,"th",10)(10,"div",11),e._uU(11,"Nombre"),e.qZA()(),e.TgZ(12,"th",10)(13,"div",11),e._uU(14,"Gesti\xf3n"),e.qZA()()()(),e.YNc(15,B,3,0,"tbody",5),e.ALo(16,"async"),e.YNc(17,$,4,7,"tbody",5),e.ALo(18,"async"),e.qZA()()(),e.TgZ(19,"div",1)(20,"ngb-pagination",12),e.NdJ("pageChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.page=o)}),e.ALo(21,"async"),e.qZA()()()}if(2&s){const t=e.oxw();let n,o,a;e.xp6(15),e.Q6J("ngIf",0==(null==(n=e.lcZ(16,6,t.source$))?null:n.length)),e.xp6(2),e.Q6J("ngIf",0!==(null==(o=e.lcZ(18,8,t.source$))?null:o.length)),e.xp6(3),e.Q6J("collectionSize",null!==(a=null==(a=e.lcZ(21,10,t.source$))?null:a.length)&&void 0!==a?a:0)("page",t.page)("pageSize",t.pageSize)("maxSize",2)}}const k=[{path:"",children:[{path:"list",component:(()=>{class s{constructor(t,n,o){this.modalService=t,this._getAccessUseCases=n,this.USERS=[],this.page=0,this.pageSize=10,this.filterName=new u.NI("",{nonNullable:!0}),this.filterAll=new u.NI("",{nonNullable:!0}),this.pipe=o,this.isReady=!1}ngOnInit(){this.response$=this._getAccessUseCases.getAll(),this.response$.subscribe(t=>{this.USERS=t,this.isReady=!0,this.source$=this.filterAll.valueChanges.pipe((0,F.O)(""),(0,L.U)(n=>this.search(n,this.pipe)))})}search(t,n){return this.USERS.filter(o=>{const a=t.toLowerCase();return n.transform(o.id).includes(a)||o.nombre.toLowerCase().includes(a)||o.apaterno.toLowerCase().includes(a)||o.amaterno.toLowerCase().includes(a)})}editById(t){this.modalService.open(N,{fullscreen:"xl"}).componentInstance.accessId=t}deleteById(t){p().fire({text:"\xbfEst\xe1 seguro desea eliminar este acceso?",title:"Eliminar Acceso",icon:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",reverseButtons:!0}).then(n=>{n.isConfirmed&&p().fire("Rol eliminado exitosamente!","MSG005","success")})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(f.FF),e.Y36(b),e.Y36(r.JJ))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-access-list"]],decls:9,vars:2,consts:[["title","Accesos"],[1,"d-flex","flex-column","align-items-end"],[1,"mt-auto","p-2"],["type","button","routerLink","/access/create",1,"btn","btn-primary"],[1,"bi","bi-plus"],[4,"ngIf"],["alt","Logo",1,"img-logo",2,"height","100%",3,"src"],[1,"col-12","table-responsive"],["aria-describedby","Accesos",1,"table","table-bordered","table-striped"],[1,"thead-inverse"],["scope","col"],[1,"col-12"],[1,"mt-auto","p-2",3,"collectionSize","page","pageSize","maxSize","pageChange"],["colspan","5"],[4,"ngFor","ngForOf"],[3,"result","term"],[1,"btn","btn-link",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-x-circle","text-danger"]],template:function(t,n){1&t&&(e.TgZ(0,"app-base")(1,"app-card",0)(2,"div",1)(3,"div",2)(4,"button",3),e._UZ(5,"em",4),e._uU(6," Nuevo Acceso "),e.qZA()()(),e.YNc(7,O,2,1,"div",5),e.YNc(8,Q,22,12,"div",5),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("ngIf",!n.isReady),e.xp6(1),e.Q6J("ngIf",n.isReady))},dependencies:[r.sg,r.O5,_.rH,v.H,f.N9,f._h,y.A,r.Ov,r.OU,r.JJ],encapsulation:2}),s})()},{path:"show",component:I},{path:"**",redirectTo:"show"}]}];let q=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[_.Bz.forChild(k),_.Bz]}),s})();var z=i(8522);let P=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[r.ez,q,z.BaseModule,f.IJ,u.UX,u.u5]}),s})()},2386:(h,m,i)=>{i.d(m,{A:()=>g});var r=i(1571);const _=["*"];let g=(()=>{class d{constructor(){this.title=""}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275cmp=r.Xpm({type:d,selectors:[["app-card"]],inputs:{title:"title"},ngContentSelectors:_,decls:2,vars:0,consts:[[1,"wrapper","flex-grow-1"]],template:function(l,e){1&l&&(r.F$t(),r.TgZ(0,"div",0),r.Hsn(1),r.qZA())},styles:[".card-container[_ngcontent-%COMP%]{width:100%;height:100%}.card-app[_ngcontent-%COMP%]{width:97%;height:95%;padding:20px}.row-title[_ngcontent-%COMP%]{text-align:center}.row-content[_ngcontent-%COMP%]{margin-top:15px}"]}),d})()},7372:(h,m,i)=>{i.d(m,{M:()=>r});class r{constructor(){this.nombre="",this.fechaRegistro=new Date,this.id=0}}},6445:(h,m,i)=>{i.d(m,{B:()=>g});var r=i(1571),_=i(6511);let g=(()=>{class d{constructor(l){this._rolesGateway=l}getById(l){return this._rolesGateway.getById(l)}getAll(){return this._rolesGateway.getAll()}}return d.\u0275fac=function(l){return new(l||d)(r.LFG(_.W))},d.\u0275prov=r.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},9119:(h,m,i)=>{i.d(m,{O:()=>g});var r=i(1571),_=i(6511);let g=(()=>{class d{constructor(l){this._rolesGateway=l}deleteById(l){return this._rolesGateway.deleteById(l)}update(l){return this._rolesGateway.update(l)}create(l){return this._rolesGateway.create(l)}}return d.\u0275fac=function(l){return new(l||d)(r.LFG(_.W))},d.\u0275prov=r.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);